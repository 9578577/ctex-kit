
\input{regression-test}

\RequirePackage{ctexpatch}
\RequirePackage{etoolbox}

\START
\AUTHOR{Qing Lee}

\ExplSyntaxOn

\cs_set_protected:Npn \TEST:w #1#2#3 \q_stop
  { \TEST { #1#2#3 } { \ctex_parse_name:NN \TEST:NN #2#2 } }
\cs_set_protected:Npn \TEST:NN #1#2
  {
    \iow_term:x
      {
        [ \token_get_replacement_spec:N #2 ] \iow_newline:
        [ \token_to_str:N #1 ]                 \iow_newline:
        [ \token_get_replacement_spec:N #1 ]
      }
  }

\clist_map_inline:nn
  {
    \newcommand           \cmda [ 1 ] [ ] ,
    \DeclareRobustCommand \cmdb [ 1 ]     ,
    \DeclareRobustCommand \cmdc [ 1 ] [ ] ,
    \newrobustcmd         \cmdd [ 1 ] [ ] ,
    \newcommand           \1    [ 1 ] [ ] ,
    \DeclareRobustCommand \2    [ 1 ]     ,
    \DeclareRobustCommand \3    [ 1 ] [ ] ,
    \newrobustcmd         \4    [ 1 ] [ ] ,
  }
  {
    #1 { ********************************************************** }
    \TEST:w #1 \q_stop
  }

\END
